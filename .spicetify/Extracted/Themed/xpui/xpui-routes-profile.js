"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[499],{70369:(e,t,a)=>{a.d(t,{$:()=>r.$});var r=a(22578)},37338:(e,t,a)=>{a.d(t,{T:()=>c});var r=a(67294),o=a.n(r),i=a(15212),n=a(25678),l=a(33732),s=a(42273),u=a(22023);const d="Ws8Ec3GREpT5PAUesr9b",m="kHu_FTRgoBLSLeAJtyKY",c=function({onClick:e,name:t,images:a,canEdit:r,placeholderType:c,shape:g=s.Kc.SQUARE,dragUri:p=""}){const[v,f]=(0,l.RH)(a),h=(0,n.VO)(v,f)===n.KO.loaded,b=(0,i.O1)([p],t);return o().createElement("div",{className:d,"data-testid":`${c}-image`,draggable:!!p,onDragStart:b},o().createElement(s.Oe,{loading:"eager",name:t,images:a,placeholderType:c,shape:g}),r&&o().createElement("div",{className:m},o().createElement(u.F,{overlay:h,onClick:e,rounded:g===s.Kc.CIRCLE})))}},11370:(e,t,a)=>{a.r(t),a.d(t,{UserPage:()=>yt,default:()=>Et});var r=a(67294),o=a.n(r),i=a(16528),n=a(69518),l=a.n(n),s=a(73305),u=a(61377),d=a(94184),m=a.n(d),c=a(20657),g=a(48327),p=a(25237),v=a(56661),f=a(1663),h=a(19480),b=a(74563);const y=e=>({owner:{display_name:e.owner_name},name:e.name,uri:e.uri,description:e.followers_count?c.ag.get("user.followers",e.followers_count):"",images:[{url:(0,b.p)({imageUriOrUrl:e.image_url}),width:300,height:300}]});function E(e){return{uri:e.uri,name:e.name,images:[{url:e.image_url}]}}function k(e=[]){return e.map(E)}function O(e){return{name:e.name,uri:e.uri,images:[{url:e.image_url}]}}const P={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",buddyFeedMinWidth:"72px",buddyFeedEmptyMinWidth:"270px",buddyFeedInitialWidth:"270px",buddyFeedMaxWidth:"384px",container:"QXcO3ZkoaTx7ioELX5tr",background:"vgKAVj_2xoRcBl9ICNNZ",overlay:"IN0XvLDk2awmwqfNQ1tZ",loggedOut:"EHqXITIBvBNaKhaIiv9s",historyButtons:"NlZEGmDvo0duN8ZjSqtH",icon:"sdvIOo6HP93UQFve8Vb9",button:"IitcTyulUx2LFKfxun17",forward:"yzVjnEBVuwpQaepom4U5",topbarContentWrapper:"BXKOn1F0CnBAetHcKEbq",topbarContent:"RKJ6mrTy2XuKy5MHMNsh",UpgradeButton:"ynhb4Y6kvf5ZHqIHNhNG",indicators:"SGPzDr6cIQzU9Cfp9qXd",contentArea:"ThLi85GOoMUjYUggFJcM",back:"sGzuRnzdqS9kmLQnQ0vY",user:"QcZDAy1SvCTuhg7mPrp8",section:"h7O8aVfJnA5HW66zEaxL",subPage:"e0rmaVvKqnNRHLE0aAKD",imageContainer:"hNTPwmaxPotdJ14dx2W9",topTrackSubPage:"zPlP6t5_EaxfMFCoXYKC",header:"bnUJ7AbYOXzytXCxj4AQ",title:"I0TU8ujta3nmI3e6yjgt",userVerifiedBadge:"g0dB9tB_EFbsxKHTHDxC"},I=e=>{var t;const{uri:a}=e,{data:i,loading:n,error:l}=(0,g.J)(p.n5.getFollowers,[a]),s=null==i||null===(t=i.body)||void 0===t?void 0:t.profiles,u=(0,r.useMemo)((()=>k(s)),[s]);return n?o().createElement(f.h,{hasError:null!==l,errorMessage:c.ag.get("error.not_found.title.page")}):o().createElement(h.P,{className:m()("contentSpacing",P.subPage),title:c.ag.get("followers"),total:u.length,showAll:!0},u.map((e=>{const t=(0,v.U)(e.uri);return o().createElement(t,{entity:e,key:e.uri})})))},w=e=>{var t;const{uri:a}=e,{data:i,loading:n,error:l}=(0,g.J)(p.n5.getFollowing,[a]),s=null==i||null===(t=i.body)||void 0===t?void 0:t.profiles,u=(0,r.useMemo)((()=>k(s)),[s]);return n?o().createElement(f.h,{hasError:null!==l,errorMessage:c.ag.get("error.not_found.title.page")}):o().createElement(h.P,{className:m()("contentSpacing",P.subPage),title:c.ag.get("following"),total:u.length,showAll:!0},u.map((e=>{const t=(0,v.U)(e.uri);return o().createElement(t,{entity:e,key:e.uri})})))};var N=a(65858),x=a(30947),_=a(20246),S=a(18261),R=a(14535),D=a(18701),A=a(43620),T=a(46146),C=a(15429),U=a(49961),M=a(56802),L=a(4236),j=a(94321),H=a(29255),W=a(52983),F=a(95661),J=a(89477),B=a(46309),K=a(43480),z=a(70369),X=a(37338),G=a(42273),Q=a(98778),V=a(59482),Z=a(72907),Y=a(96685),q=a(79202),$=a(6060),ee=a(16229),te=a(76343),ae=a(85105),re=a(50119),oe=a(95184),ie=a(83298),ne=a(25678),le=a(33732);const se="F8_EX1AeKxXNSeh1qiHq",ue="valcBm4lLe9qFBcg0sFY",de="tAIzXn8C9KriGwGuBfWg",me="PsrXxenHUFXYM1ub1xWw",ce="U_VWfeeLWnDPhUTxCmrQ",ge=function({onClickEdit:e,onClickRemove:t,name:a,images:r}){const[i,n]=(0,le.RH)(r),l=(0,ne.VO)(i,n)===ne.KO.loaded;return o().createElement("div",{className:se},o().createElement(G.Oe,{loading:"eager",name:a,images:r,placeholderType:"user",shape:G.Kc.CIRCLE}),o().createElement("div",{className:m()(ue,{[me]:l})},o().createElement("button",{className:de,"aria-haspopup":"true",onClick:e,type:"button"},o().createElement(te.Dy,null,c.ag.get("user.edit-details.choose-photo"))),o().createElement("div",{className:m()(ce,"icon")},o().createElement(ie.f,{iconSize:48,"aria-hidden":!0})),o().createElement("button",{className:de,onClick:t,type:"button"},o().createElement(te.Dy,null,c.ag.get("user.edit-details.remove-photo")))))};var pe=a(80624),ve=a(16516),fe=a(59713),he=a.n(fe),be=a(62100);function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),!0).forEach((function(t){he()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const ke={paths:""},Oe={encode(e,t=be.Writer.create()){for(const a of e.paths)t.uint32(10).string(a);return t},decode(e,t){const a=e instanceof Uint8Array?new be.Reader(e):e;let r=void 0===t?a.len:a.pos+t;const o=Ee({},ke);for(o.paths=[];a.pos<r;){const e=a.uint32();if(e>>>3==1)o.paths.push(a.string());else a.skipType(7&e)}return o},fromJSON(e){const t=Ee({},ke);if(t.paths=[],void 0!==e.paths&&null!==e.paths)for(const a of e.paths)t.paths.push(String(a));return t},fromPartial(e){const t=Ee({},ke);if(t.paths=[],void 0!==e.paths&&null!==e.paths)for(const a of e.paths)t.paths.push(a);return t},toJSON(e){const t={};return e.paths?t.paths=e.paths.map((e=>e)):t.paths=[],t}};var Pe=a(43720),Ie=a(48764).Buffer;function we(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?we(Object(a),!0).forEach((function(t){he()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):we(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const xe={value:0},_e={value:!1},Se={value:""};const Re={encode:(e,t=be.Writer.create())=>(t.uint32(8).int32(e.value),t),decode(e,t){const a=e instanceof Uint8Array?new be.Reader(e):e;let r=void 0===t?a.len:a.pos+t;const o=Ne({},xe);for(;a.pos<r;){const e=a.uint32();if(e>>>3==1)o.value=a.int32();else a.skipType(7&e)}return o},fromJSON(e){const t=Ne({},xe);return void 0!==e.value&&null!==e.value?t.value=Number(e.value):t.value=0,t},fromPartial(e){const t=Ne({},xe);return void 0!==e.value&&null!==e.value?t.value=e.value:t.value=0,t},toJSON(e){const t={};return void 0!==e.value&&(t.value=e.value),t}},De={encode:(e,t=be.Writer.create())=>(t.uint32(8).bool(e.value),t),decode(e,t){const a=e instanceof Uint8Array?new be.Reader(e):e;let r=void 0===t?a.len:a.pos+t;const o=Ne({},_e);for(;a.pos<r;){const e=a.uint32();if(e>>>3==1)o.value=a.bool();else a.skipType(7&e)}return o},fromJSON(e){const t=Ne({},_e);return void 0!==e.value&&null!==e.value?t.value=Boolean(e.value):t.value=!1,t},fromPartial(e){const t=Ne({},_e);return void 0!==e.value&&null!==e.value?t.value=e.value:t.value=!1,t},toJSON(e){const t={};return void 0!==e.value&&(t.value=e.value),t}},Ae={encode:(e,t=be.Writer.create())=>(t.uint32(10).string(e.value),t),decode(e,t){const a=e instanceof Uint8Array?new be.Reader(e):e;let r=void 0===t?a.len:a.pos+t;const o=Ne({},Se);for(;a.pos<r;){const e=a.uint32();if(e>>>3==1)o.value=a.string();else a.skipType(7&e)}return o},fromJSON(e){const t=Ne({},Se);return void 0!==e.value&&null!==e.value?t.value=String(e.value):t.value="",t},fromPartial(e){const t=Ne({},Se);return void 0!==e.value&&null!==e.value?t.value=e.value:t.value="",t},toJSON(e){const t={};return void 0!==e.value&&(t.value=e.value),t}};be.util.Long!==Pe&&(be.util.Long=Pe,(0,be.configure)());const Te=globalThis;Te.atob,Te.btoa;function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(a),!0).forEach((function(t){he()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const Me={maxWidth:0,maxHeight:0,url:""},Le={},je={},He={encode:(e,t=be.Writer.create())=>(t.uint32(8).int32(e.maxWidth),t.uint32(16).int32(e.maxHeight),t.uint32(26).string(e.url),t),decode(e,t){const a=e instanceof Uint8Array?new be.Reader(e):e;let r=void 0===t?a.len:a.pos+t;const o=Ue({},Me);for(;a.pos<r;){const e=a.uint32();switch(e>>>3){case 1:o.maxWidth=a.int32();break;case 2:o.maxHeight=a.int32();break;case 3:o.url=a.string();break;default:a.skipType(7&e)}}return o},fromJSON(e){const t=Ue({},Me);return void 0!==e.maxWidth&&null!==e.maxWidth?t.maxWidth=Number(e.maxWidth):t.maxWidth=0,void 0!==e.maxHeight&&null!==e.maxHeight?t.maxHeight=Number(e.maxHeight):t.maxHeight=0,void 0!==e.url&&null!==e.url?t.url=String(e.url):t.url="",t},fromPartial(e){const t=Ue({},Me);return void 0!==e.maxWidth&&null!==e.maxWidth?t.maxWidth=e.maxWidth:t.maxWidth=0,void 0!==e.maxHeight&&null!==e.maxHeight?t.maxHeight=e.maxHeight:t.maxHeight=0,void 0!==e.url&&null!==e.url?t.url=e.url:t.url="",t},toJSON(e){const t={};return void 0!==e.maxWidth&&(t.maxWidth=e.maxWidth),void 0!==e.maxHeight&&(t.maxHeight=e.maxHeight),void 0!==e.url&&(t.url=e.url),t}},We={encode(e,t=be.Writer.create()){void 0!==e.username&&void 0!==e.username&&Ae.encode({value:e.username},t.uint32(10).fork()).ldelim(),void 0!==e.name&&void 0!==e.name&&Ae.encode({value:e.name},t.uint32(18).fork()).ldelim();for(const a of e.images)He.encode(a,t.uint32(26).fork()).ldelim();return void 0!==e.verified&&void 0!==e.verified&&De.encode({value:e.verified},t.uint32(34).fork()).ldelim(),void 0!==e.editProfileDisabled&&void 0!==e.editProfileDisabled&&De.encode({value:e.editProfileDisabled},t.uint32(42).fork()).ldelim(),void 0!==e.reportAbuseDisabled&&void 0!==e.reportAbuseDisabled&&De.encode({value:e.reportAbuseDisabled},t.uint32(50).fork()).ldelim(),void 0!==e.abuseReportedName&&void 0!==e.abuseReportedName&&De.encode({value:e.abuseReportedName},t.uint32(58).fork()).ldelim(),void 0!==e.abuseReportedImage&&void 0!==e.abuseReportedImage&&De.encode({value:e.abuseReportedImage},t.uint32(66).fork()).ldelim(),void 0!==e.hasSpotifyName&&void 0!==e.hasSpotifyName&&De.encode({value:e.hasSpotifyName},t.uint32(74).fork()).ldelim(),void 0!==e.hasSpotifyImage&&void 0!==e.hasSpotifyImage&&De.encode({value:e.hasSpotifyImage},t.uint32(82).fork()).ldelim(),void 0!==e.color&&void 0!==e.color&&Re.encode({value:e.color},t.uint32(90).fork()).ldelim(),t},decode(e,t){const a=e instanceof Uint8Array?new be.Reader(e):e;let r=void 0===t?a.len:a.pos+t;const o=Ue({},Le);for(o.images=[];a.pos<r;){const e=a.uint32();switch(e>>>3){case 1:o.username=Ae.decode(a,a.uint32()).value;break;case 2:o.name=Ae.decode(a,a.uint32()).value;break;case 3:o.images.push(He.decode(a,a.uint32()));break;case 4:o.verified=De.decode(a,a.uint32()).value;break;case 5:o.editProfileDisabled=De.decode(a,a.uint32()).value;break;case 6:o.reportAbuseDisabled=De.decode(a,a.uint32()).value;break;case 7:o.abuseReportedName=De.decode(a,a.uint32()).value;break;case 8:o.abuseReportedImage=De.decode(a,a.uint32()).value;break;case 9:o.hasSpotifyName=De.decode(a,a.uint32()).value;break;case 10:o.hasSpotifyImage=De.decode(a,a.uint32()).value;break;case 11:o.color=Re.decode(a,a.uint32()).value;break;default:a.skipType(7&e)}}return o},fromJSON(e){const t=Ue({},Le);if(t.images=[],void 0!==e.username&&null!==e.username?t.username=String(e.username):t.username=void 0,void 0!==e.name&&null!==e.name?t.name=String(e.name):t.name=void 0,void 0!==e.images&&null!==e.images)for(const a of e.images)t.images.push(He.fromJSON(a));return void 0!==e.verified&&null!==e.verified?t.verified=Boolean(e.verified):t.verified=void 0,void 0!==e.editProfileDisabled&&null!==e.editProfileDisabled?t.editProfileDisabled=Boolean(e.editProfileDisabled):t.editProfileDisabled=void 0,void 0!==e.reportAbuseDisabled&&null!==e.reportAbuseDisabled?t.reportAbuseDisabled=Boolean(e.reportAbuseDisabled):t.reportAbuseDisabled=void 0,void 0!==e.abuseReportedName&&null!==e.abuseReportedName?t.abuseReportedName=Boolean(e.abuseReportedName):t.abuseReportedName=void 0,void 0!==e.abuseReportedImage&&null!==e.abuseReportedImage?t.abuseReportedImage=Boolean(e.abuseReportedImage):t.abuseReportedImage=void 0,void 0!==e.hasSpotifyName&&null!==e.hasSpotifyName?t.hasSpotifyName=Boolean(e.hasSpotifyName):t.hasSpotifyName=void 0,void 0!==e.hasSpotifyImage&&null!==e.hasSpotifyImage?t.hasSpotifyImage=Boolean(e.hasSpotifyImage):t.hasSpotifyImage=void 0,void 0!==e.color&&null!==e.color?t.color=Number(e.color):t.color=void 0,t},fromPartial(e){const t=Ue({},Le);if(t.images=[],void 0!==e.username&&null!==e.username?t.username=e.username:t.username=void 0,void 0!==e.name&&null!==e.name?t.name=e.name:t.name=void 0,void 0!==e.images&&null!==e.images)for(const a of e.images)t.images.push(He.fromPartial(a));return void 0!==e.verified&&null!==e.verified?t.verified=e.verified:t.verified=void 0,void 0!==e.editProfileDisabled&&null!==e.editProfileDisabled?t.editProfileDisabled=e.editProfileDisabled:t.editProfileDisabled=void 0,void 0!==e.reportAbuseDisabled&&null!==e.reportAbuseDisabled?t.reportAbuseDisabled=e.reportAbuseDisabled:t.reportAbuseDisabled=void 0,void 0!==e.abuseReportedName&&null!==e.abuseReportedName?t.abuseReportedName=e.abuseReportedName:t.abuseReportedName=void 0,void 0!==e.abuseReportedImage&&null!==e.abuseReportedImage?t.abuseReportedImage=e.abuseReportedImage:t.abuseReportedImage=void 0,void 0!==e.hasSpotifyName&&null!==e.hasSpotifyName?t.hasSpotifyName=e.hasSpotifyName:t.hasSpotifyName=void 0,void 0!==e.hasSpotifyImage&&null!==e.hasSpotifyImage?t.hasSpotifyImage=e.hasSpotifyImage:t.hasSpotifyImage=void 0,void 0!==e.color&&null!==e.color?t.color=e.color:t.color=void 0,t},toJSON(e){const t={};return void 0!==e.username&&(t.username=e.username),void 0!==e.name&&(t.name=e.name),e.images?t.images=e.images.map((e=>e?He.toJSON(e):void 0)):t.images=[],void 0!==e.verified&&(t.verified=e.verified),void 0!==e.editProfileDisabled&&(t.editProfileDisabled=e.editProfileDisabled),void 0!==e.reportAbuseDisabled&&(t.reportAbuseDisabled=e.reportAbuseDisabled),void 0!==e.abuseReportedName&&(t.abuseReportedName=e.abuseReportedName),void 0!==e.abuseReportedImage&&(t.abuseReportedImage=e.abuseReportedImage),void 0!==e.hasSpotifyName&&(t.hasSpotifyName=e.hasSpotifyName),void 0!==e.hasSpotifyImage&&(t.hasSpotifyImage=e.hasSpotifyImage),void 0!==e.color&&(t.color=e.color),t}},Fe={encode:(e,t=be.Writer.create())=>(void 0!==e.mask&&void 0!==e.mask&&Oe.encode(e.mask,t.uint32(10).fork()).ldelim(),void 0!==e.userProfile&&void 0!==e.userProfile&&We.encode(e.userProfile,t.uint32(18).fork()).ldelim(),t),decode(e,t){const a=e instanceof Uint8Array?new be.Reader(e):e;let r=void 0===t?a.len:a.pos+t;const o=Ue({},je);for(;a.pos<r;){const e=a.uint32();switch(e>>>3){case 1:o.mask=Oe.decode(a,a.uint32());break;case 2:o.userProfile=We.decode(a,a.uint32());break;default:a.skipType(7&e)}}return o},fromJSON(e){const t=Ue({},je);return void 0!==e.mask&&null!==e.mask?t.mask=Oe.fromJSON(e.mask):t.mask=void 0,void 0!==e.userProfile&&null!==e.userProfile?t.userProfile=We.fromJSON(e.userProfile):t.userProfile=void 0,t},fromPartial(e){const t=Ue({},je);return void 0!==e.mask&&null!==e.mask?t.mask=Oe.fromPartial(e.mask):t.mask=void 0,void 0!==e.userProfile&&null!==e.userProfile?t.userProfile=We.fromPartial(e.userProfile):t.userProfile=void 0,t},toJSON(e){const t={};return void 0!==e.mask&&(t.mask=e.mask?Oe.toJSON(e.mask):void 0),void 0!==e.userProfile&&(t.userProfile=e.userProfile?We.toJSON(e.userProfile):void 0),t}},Je=`${ve.XA}/identity`;async function Be(e,t,{name:a,imageUploadToken:r}){void 0!==a&&await async function(e,t,a){const r=Fe.encode(Fe.fromPartial({mask:{paths:["name"]},userProfile:null!==a?{name:a}:{}}));await e.build().withHost(Je).withMethod("POST").withPath(`/v3/user/username/${encodeURIComponent((0,C.C)(t))}`).withEndpointIdentifier("/v3/user/username/{username}").withBody(r.finish()).withoutMarket().send()}(e,t,a),void 0!==r&&(null!==r?await async function(e,t,a){await e.build().withHost(Je).withMethod("POST").withPath(`/v3/profile-image/${encodeURIComponent((0,C.C)(t))}/${a}`).withEndpointIdentifier("/v3/profile-image/{username}/{uploadToken}").withoutMarket().send()}(e,t,r):await async function(e,t){await e.build().withHost(Je).withMethod("DELETE").withPath(`/v3/profile-image/${encodeURIComponent((0,C.C)(t))}`).withEndpointIdentifier("/v3/profile-image/{username}").withoutMarket().send()}(e,t))}const Ke={type:"error",get message(){return c.ag.get("user.edit-details.error.file-size-exceeded",4)}},ze={type:"error",get message(){return c.ag.get("user.edit-details.error.too-small",300,300)}},Xe={type:"error",get message(){return c.ag.get("user.edit-details.error.missing-name")}},Ge={type:"error",get message(){return c.ag.get("user.edit-details.error.failed-to-save")}},Qe={type:"error",get message(){return c.ag.get("user.edit-details.error.file-upload-failed")}};function Ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(a),!0).forEach((function(t){he()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ye(e){return{type:"setLoading",loading:e}}function qe(e){return{type:"setMessage",message:e}}function $e(e,t){switch(t.type){case"setName":return Ze(Ze({},e),{},{name:t.name});case"setMessage":return Ze(Ze({},e),{},{message:t.message,loading:!1});case"setLoading":return Ze(Ze({},e),{},{loading:t.loading,message:null});case"setImageData":return Ze(Ze({},e),{},{imageData:t.data,removeImage:!1});case"setImageToken":return Ze(Ze({},e),{},{imageToken:t.token,removeImage:!1});case"removeImage":return Ze(Ze({},e),{},{imageToken:void 0,imageData:void 0,image:void 0,removeImage:!0});default:return e}}const et={container:"XwNfIrI6_hCa_9_T2cQB",content:"so0bdX3oZH6YW5_nGxIR",header:"aM3plU4zzDqjWlvUHGYb",closeBtn:"zHeo4VUxytwm6Ptr0QyA",image:"vAeyAmeLkDEDKdL9Hou0",imageLoadingContainer:"dnmzO6yYKkxUV8jl7O1Z",textElement:"oN9QVvJKEtdTH3HGfCu1",name:"uj7hczcCH1dZpse8Kfmi",textElementLabel:"wvLAEV5wF5C5ej6rvimT",labelText:"gAQfzAUp1FuSXODeZJfP",nameInput:"dMhJaxli87_22jb_3d9x",save:"MDb7QhAtHeyM4gKj8j8t",disclaimer:"zGbjZMZ1DTx4futEbN9l"},tt=o().memo((({uri:e,name:t,image:a,onClose:i,shouldOpenImagePicker:n})=>{const[l,s]=(0,re.Hs)(),[u,d]=function({name:e,image:t}){return(0,r.useReducer)($e,{loading:!1,message:null,name:e,image:t})}({name:t,image:a}),g=(0,r.useMemo)((()=>{const e=u.imageData||u.image;return e?[{url:e,width:300,height:300}]:[]}),[u.image,u.imageData]);(0,r.useEffect)((()=>{n&&s()}),[s,n]);const p=(0,r.useCallback)((e=>{e===re.Hy.FILE_TOO_BIG?d(qe(Ke)):e===re.Hy.IMAGE_TOO_SMALL&&d(qe(ze))}),[d]),v=(0,r.useCallback)((()=>{d({type:"removeImage"})}),[d]),f=(0,r.useCallback)((async t=>{t.preventDefault();if(0!==u.name.trim().length){d(Ye(!0));try{const t=u.removeImage?null:u.imageToken;await async function(e,{name:t,imageUploadToken:a}){await Be(pe.b.getInstance(),e,{name:t,imageUploadToken:a})}(e,{name:u.name,imageUploadToken:t}),i({name:u.name,image:u.imageData||u.image})}catch(e){d(qe(Ge))}}else d(qe(Xe))}),[d,i,u.image,u.imageData,u.imageToken,u.name,u.removeImage,e]);return o().createElement(ae.Z,{isOpen:!0,contentLabel:c.ag.get("user.edit-details.title"),onRequestClose:()=>i()},o().createElement("div",{className:et.container},o().createElement("div",{className:et.header},o().createElement(te.Dy,{as:"h1",className:et.heading,variant:Y.LF.canon},c.ag.get("user.edit-details.title")),o().createElement("button",{className:et.closeBtn,onClick:()=>i(),"aria-label":c.ag.get("close")},o().createElement(q.j,{iconSize:16}))),u.message&&o().createElement(oe.X,{isErrorMessage:"error"===u.message.type,message:u.message.message}),o().createElement("form",{className:et.content,onSubmit:f},o().createElement(re.uL,{isOpen:l,minImageWidth:300,minImageHeight:300,maxFileSizeMB:4,onChange:async function(e){if(!e)return;const{imageFile:t,imageDataUrl:a}=e;if(d(qe(null)),d({type:"setImageData",data:a}),t)try{d(Ye(!0));const e=await async function(e){const t=await pe.b.getInstance().build().withEndpointIdentifier("image-upload/v4/user-profile").withHost("https://image-upload.spotify.com/v4").withMethod("POST").withPath("/user-profile").withBody(e).withoutGlobalHeaders().withHeaders([{key:"Content-Type",value:"image/jpeg"}]).withoutMarket().send();if(!t.body)throw new Error("No upload token recieved");return t.body.uploadToken}(t);d({type:"setImageToken",token:e}),d(Ye(!1))}catch{d(qe(Qe))}},onError:p}),o().createElement("div",{className:et.image},o().createElement(ge,{name:t,images:g,onClickEdit:s,onClickRemove:v}),u.loading&&o().createElement("div",{className:et.imageLoadingContainer},o().createElement($.T,null))),o().createElement("div",{className:et.name},o().createElement("label",{htmlFor:"user-edit-name",className:et.textElementLabel},o().createElement(te.Dy,{as:"span",variant:Y.LF.finaleBold,className:et.labelText},c.ag.get("user.edit-details.name-label"))),o().createElement("input",{"data-testid":"user-edit-name-input",id:"user-edit-name",type:"text",dir:"auto",className:m()(et.textElement,et.nameInput),onChange:e=>{d(function(e){return{type:"setName",name:e}}(e.target.value))},placeholder:c.ag.get("user.edit-details.name-placeholder"),maxLength:32,value:u.name})),o().createElement(ee.Y,{version:"secondary",className:et.save,onClick:f,disabled:u.loading},c.ag.get("save")),o().createElement(te.Dy,{as:"p",variant:Y.LF.finaleBold,className:et.disclaimer},c.ag.get("image-upload.legal-disclaimer")))))}));var at=a(13218),rt=a(47991),ot=a(42922),it=a(84242),nt=a(42781),lt=a(28248),st=a(78041);const ut=o().memo((({tracks:e,hasHeaderRow:t=!1,nrTracksVisible:a,uri:i})=>{const n=(0,C.C)(i),s=l().userToplistURI(n,"tracks").toURI(),u=(0,r.useMemo)((()=>a?e.slice(0,a):e),[a,e]),{usePlayContextItem:d}=(0,it.n)({uri:s,pages:[{items:e.map((e=>({type:nt.p.TRACK,uri:e.uri,uid:null,provider:null})))}]},{featureIdentifier:"profile",referrerIdentifier:"user_profile"}),m=(0,r.useCallback)(((e,t)=>{var a;const r=(0,U.X)(null==e||null===(a=e.album)||void 0===a?void 0:a.images,{desiredSize:40});return o().createElement(st.SS,{key:t+e.uri,index:t,uri:(0,rt.$V)(e),duration_ms:e.duration_ms,name:e.name,artists:e.artists,album:e.album,isPlayable:!0,isExplicit:!!e.explicit,isMOGEFRestricted:!!e.mogef19,imgUrl:(null==r?void 0:r.url)||"",contextUri:s,usePlayContextItem:d})}),[s,d]),g=(0,r.useMemo)((()=>[lt.QD.INDEX,lt.QD.TITLE,lt.QD.ALBUM,lt.QD.DURATION]),[]),p=(0,r.useCallback)((e=>e.uri),[]);return o().createElement(ot.ZP,{value:"user-top-tracks-tracklist"},o().createElement(lt.Pv,{ariaLabel:c.ag.get("top_tracks_this_month"),renderRow:m,nrTracks:u.length,tracks:u,resolveUri:p,hasHeaderRow:t,columns:g}))}),((e,t)=>e.tracks===t.tracks)),dt=o().memo((({tracks:e,title:t,tagline:a,seeAllUri:r,className:i,uri:n})=>{if(!e||0===e.length)return null;const l=e.length>4;return o().createElement("section",{className:i},o().createElement(at.r,{title:t,tagline:a,seeAllUri:r,hasMoreElements:l}),o().createElement(ut,{tracks:e,uri:n,nrTracksVisible:4}))}),((e,t)=>e.tracks===t.tracks));function mt(e,t){switch(t.type){case"OPEN_MODAL":return{isModalOpen:!0,shouldOpenImagePicker:!1};case"OPEN_MODAL_WITH_IMAGEPICKER":return{isModalOpen:!0,shouldOpenImagePicker:!0};case"CLOSE_MODAL":return{isModalOpen:!1,shouldOpenImagePicker:!1};default:return e}}const ct=({uri:e})=>{var t,a;const i=(0,N.v9)(H.Gf),n=(0,N.v9)(H.A$),s=(0,N.I0)(),[u,d]=(0,T.H)(e),b=(0,r.useMemo)((()=>(0,U.X)(n)),[n]),[{isModalOpen:E,shouldOpenImagePicker:I},w]=function(){const[e,t]=(0,r.useReducer)(mt,{isModalOpen:!1,shouldOpenImagePicker:!1});return[e,t]}(),Y=(0,M.o)(),q=!(0,L.k)(),{data:$,loading:ee}=(0,g.J)(p.n5.getProfile,[{uri:e,playlists:10,artists:10}]),te=null==$?void 0:$.body,ae=null==te?void 0:te.public_playlists,re=null==te?void 0:te.is_verified,oe=(null==te?void 0:te.is_current_user)||!1,ie=null==te?void 0:te.recently_played_artists,ne=oe?(null==b?void 0:b.url)||"":(null==te?void 0:te.image_url)||"",le=(0,C.C)(e),se=(0,N.v9)(j.C7),ue=(oe?i:null==te?void 0:te.name)||"",de=(0,A.Z)((null==te?void 0:te.image_url)||null),{data:me,loading:ce}=(0,g.J)(p.n5.getFollowing,[e]),ge=null==me||null===(t=me.body)||void 0===t?void 0:t.profiles,{data:pe,loading:ve}=(0,g.J)(p.n5.getFollowers,[e]),fe=null==pe||null===(a=pe.body)||void 0===a?void 0:a.profiles,he=(0,r.useMemo)((()=>(e=>e?p.n5.getUserTopArtists:()=>Promise.resolve({status:200,body:{items:[],offset:0,limit:0,total:0,href:"",next:null,previous:null}}))(oe)),[oe]),be=(0,r.useMemo)((()=>(e=>e?p.n5.getUserTopTracks:()=>Promise.resolve({status:200,body:{items:[],offset:0,limit:0,total:0,href:"",next:null,previous:null}}))(oe&&!se)),[oe,se]),{data:ye,loading:Ee}=(0,g.J)(he,[]),{data:ke,loading:Oe}=(0,g.J)(be,[]),Pe=null==ye?void 0:ye.body,Ie=null==ke?void 0:ke.body,we=(0,r.useCallback)((()=>{Y({targetUri:e,intent:u?"unfollow":"follow",type:"click"}),d(!u)}),[u,Y,d,e]),Ne=(0,r.useCallback)((e=>{w({type:"CLOSE_MODAL"}),e&&(s((0,W.dL)(e.name)),s((0,W.GR)(e.image?[{url:e.image,height:null,width:null}]:[])))}),[s,w]),xe=(0,r.useCallback)((()=>w({type:"OPEN_MODAL"})),[w]),_e=(0,r.useCallback)((()=>{w({type:"OPEN_MODAL_WITH_IMAGEPICKER"})}),[w]),Se=(0,r.useMemo)((()=>k(ge)),[ge]),Re=(0,r.useMemo)((()=>k(fe)),[fe]),De=(0,r.useMemo)((()=>(ae||[]).map(y)),[ae]),Ae=(0,r.useMemo)((()=>(ie||[]).map(O)),[ie]),Te=(0,r.useMemo)((()=>[{url:ne}]),[ne]);if(!te||ee||ce||ve||Oe||Ee)return o().createElement(f.h,{hasError:!1,errorMessage:c.ag.get("error.not_found.title.page")});const Ce={total:te.followers_count},Ue=m()("contentSpacing",P.section,P.shelf);return o().createElement("div",{className:P.user},o().createElement(z.$,null,ue),o().createElement(G.gF,{backgroundColor:de},o().createElement(V.W,null,o().createElement(Z.i,{text:ue})),o().createElement(S._,{menu:o().createElement(K.I,{uri:te.uri})},o().createElement("div",{className:P.imageContainer},o().createElement(X.T,{canEdit:oe,name:ue,images:Te,onClick:_e,placeholderType:"user",shape:G.Kc.CIRCLE}))),o().createElement(G.sP,null,o().createElement(G.dy,{small:!0,uppercase:!0},re&&o().createElement("span",{className:P.userVerifiedBadge},o().createElement(D.S,null)),c.ag.get("card.tag.profile")),o().createElement(S._,{menu:o().createElement(K.I,{uri:te.uri})},o().createElement(G.xd,{canEdit:oe,editTitle:c.ag.get("playlist.edit-details.title"),onClick:xe},ue)),o().createElement(G.QS,{totalFollowers:Ce.total,totalFollowing:Se.length,publicPlaylists:te.total_public_playlists_count,userUri:e}))),o().createElement(x.o,{backgroundColor:de},o().createElement(x.F,null,!oe&&o().createElement(Q.r,null,o().createElement(R.e,{isFollowing:Boolean(u),onClick:we,disabled:q})),o().createElement(_.y,{menu:o().createElement(K.I,{uri:te.uri,onEditProfileCallback:xe})},o().createElement(F.z,{label:c.ag.get("more.label.context",ue)})))),o().createElement(h.P,{className:Ue,total:(null==Pe?void 0:Pe.total)||0,title:c.ag.get("top_artists_this_month"),tagline:c.ag.get("only_visible_to_you"),seeAllUri:l().profileURI(le,["top","artists"]).toURI()},null==Pe?void 0:Pe.items.map(((e,t)=>o().createElement(J.I,{index:t,key:e.uri,entity:e})))),o().createElement(dt,{className:Ue,title:c.ag.get("top_tracks_this_month"),tagline:c.ag.get("only_visible_to_you"),seeAllUri:l().profileURI(le,["top","tracks"]).toURI(),uri:e,tracks:null==Ie?void 0:Ie.items}),o().createElement(h.P,{className:Ue,total:te.total_public_playlists_count,title:c.ag.get("public_playlists"),seeAllUri:l().profileURI(le,["playlists"]).toURI()},De.map(((e,t)=>o().createElement(B.Z,{index:t,key:e.uri,entity:e})))),Ae.length?o().createElement(h.P,{className:Ue,total:Ae.length,title:c.ag.get("recently_played_artists"),seeAllUri:l().profileURI(le,["recently-played-artists"]).toURI()},Ae.map(((e,t)=>o().createElement(J.I,{index:t,key:e.uri,entity:e})))):null,Re.length?o().createElement(h.P,{className:Ue,title:c.ag.get("followers"),total:Re.length,seeAllUri:l().profileURI(le,["followers"]).toURI()},Re.map((e=>{const t=(0,v.U)(e.uri);return o().createElement(t,{key:e.uri,entity:e})}))):null,Se.length?o().createElement(h.P,{className:Ue,title:c.ag.get("following"),total:Se.length,seeAllUri:l().profileURI(le,["following"]).toURI()},Se.map((e=>{const t=(0,v.U)(e.uri);return o().createElement(t,{key:e.uri,entity:e})}))):null,oe&&E?o().createElement(tt,{uri:e,name:ue,image:ne,onClose:Ne,shouldOpenImagePicker:I}):null)},gt=e=>{const{uri:t}=e,{data:a,loading:i,error:n}=(0,g.J)(p.n5.getPlaylists,[{uri:t}]),l=null==a?void 0:a.body,{public_playlists:s,total_public_playlists_count:u=0}=l||{},d=(0,r.useMemo)((()=>(s||[]).map(y)),[s]);return i?o().createElement(f.h,{hasError:null!==n,errorMessage:c.ag.get("error.not_found.title.page")}):o().createElement(h.P,{className:m()("contentSpacing",P.subPage),total:u,title:c.ag.get("public_playlists"),showAll:!0},d.map(((e,t)=>o().createElement(B.Z,{index:t,key:e.uri,entity:e}))))},pt=e=>{var t;const{uri:a}=e,{data:i,loading:n,error:l}=(0,g.J)(p.n5.getRecentlyPlayedArtists,[{uri:a,limit:50}]),s=null==i||null===(t=i.body)||void 0===t?void 0:t.artists,u=(0,r.useMemo)((()=>(s||[]).map(O)),[s]);return n?o().createElement(f.h,{hasError:null!==l,errorMessage:c.ag.get("error.not_found.title.page")}):o().createElement(h.P,{className:m()("contentSpacing",P.subPage),total:u.length,title:c.ag.get("recently_played_artists"),showAll:!0},u.map(((e,t)=>o().createElement(J.I,{index:t,key:e.uri,entity:e}))))},vt=()=>{const{data:e,loading:t,error:a}=(0,g.J)(p.n5.getUserTopArtists),r=null==e?void 0:e.body;return t?o().createElement(f.h,{hasError:null!==a,errorMessage:c.ag.get("error.not_found.title.page")}):r?o().createElement(h.P,{className:m()("contentSpacing",P.subPage),total:r.items.length,title:c.ag.get("top_artists_this_month"),tagline:c.ag.get("only_visible_to_you"),showAll:!0},r.items.map(((e,t)=>o().createElement(J.I,{key:e.uri,index:t,entity:e})))):null},ft=({uri:e})=>{const{data:t,loading:a,error:r}=(0,g.J)(p.n5.getProfile,[{uri:e}]),i=null==t?void 0:t.body,n=(null==i?void 0:i.is_current_user)||!1;return i&&!a&&n?o().createElement(vt,null):o().createElement(f.h,{hasError:null!==r,errorMessage:c.ag.get("error.not_found.title.page")})},ht=({uri:e})=>{const{data:t,loading:a,error:r}=(0,g.J)(p.n5.getUserTopTracks,[{offset:0,limit:50}]),i=null==t?void 0:t.body;return a?o().createElement(f.h,{hasError:null!==r,errorMessage:c.ag.get("error.not_found.title.page")}):i?o().createElement("div",{className:m()("contentSpacing",P.subPage,P.topTrackSubPage)},o().createElement("div",{className:P.header},o().createElement(te.Dy,{as:"h1",variant:Y.LF.canon,className:P.title},c.ag.get("top_tracks_this_month")),o().createElement(te.Dy,{as:"p",variant:Y.LF.mesto},c.ag.get("only_visible_to_you"))),o().createElement(ut,{tracks:i.items,uri:e,hasHeaderRow:!0})):null},bt=({uri:e})=>{const{data:t,loading:a,error:r}=(0,g.J)(p.n5.getProfile,[{uri:e}]),i=null==t?void 0:t.body,n=(null==i?void 0:i.is_current_user)||!1;return i&&!a&&n?o().createElement(ht,{uri:e}):o().createElement(f.h,{hasError:null!==r,errorMessage:c.ag.get("error.not_found.title.page")})},yt=o().memo((()=>{const{userId:e}=(0,i.UO)(),t=decodeURIComponent(e),a=l().profileURI(t).toURI();return o().createElement("section",null,o().createElement(u.N,{exact:!0,path:"/user/:userId/playlists",pageId:s.W.PROFILE_PLAYLISTS},o().createElement(gt,{uri:a})),o().createElement(u.N,{exact:!0,path:"/user/:userId/top/tracks",pageId:s.W.PROFILE_TOP_TRACKS},o().createElement(bt,{uri:a})),o().createElement(u.N,{exact:!0,path:"/user/:userId/top/artists",pageId:s.W.PROFILE_TOP_ARTISTS},o().createElement(ft,{uri:a})),o().createElement(u.N,{exact:!0,path:"/user/:userId/recently-played-artists",pageId:s.W.PROFILE_RECENTLY_PLAYED_ARTISTS},o().createElement(pt,{uri:a})),o().createElement(u.N,{exact:!0,path:"/user/:userId/following",pageId:s.W.PROFILE_FOLLOWING},o().createElement(w,{uri:a})),o().createElement(u.N,{exact:!0,path:"/user/:userId/followers",pageId:s.W.PROFILE_FOLLOWERS},o().createElement(I,{uri:a})),o().createElement(u.N,{exact:!0,path:"/user/:userId",pageId:s.W.PROFILE},o().createElement(ct,{uri:a})))})),Et=yt},14535:(e,t,a)=>{a.d(t,{e:()=>m});var r=a(67294),o=a.n(r),i=a(20657),n=a(94184),l=a.n(n);const s="aAr9nYtPsG7P2LRzciXc",u="fBTYgGyvIbHizHIj7AAX",d="oUzIIkcyBdRs7hrwbwIo",m=o().memo((({isFollowing:e,onClick:t,disabled:a=!1,buttonText:r})=>{const n=e?i.ag.get("following"):i.ag.get("follow");return o().createElement("button",{type:"button",className:l()(s,{[u]:e,[d]:a}),onClick:t},r||n)}))},18701:(e,t,a)=>{a.d(t,{S:()=>i});var r=a(67294),o=a.n(r);const i=()=>o().createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o().createElement("path",{d:"M12 21.6596l-3.38079 1.8543-1.84158-3.3877-3.84662-.2679.28231-3.8456-3.09118-2.3049 2.31658-3.0825-1.3543-3.61028 3.61534-1.34071.81255-3.76935 3.76627.82672L12 0l2.7214 2.73168 3.7663-.82672.8125 3.76935 3.6154 1.34071-1.3543 3.61028 2.3166 3.0825-3.0912 2.3049.2823 3.8456-3.8466.2679-1.8416 3.3877L12 21.6596z",fill:"#2E77D0"}),o().createElement("path",{d:"M16.8637 7.41226l-6.6435 7.77824-2.80421-3.2842-.4935.5775 3.29771 3.8617 7.2135-8.44649-.57-.48675z",fill:"#fff"}))}}]);
//# sourceMappingURL=xpui-routes-profile.js.map