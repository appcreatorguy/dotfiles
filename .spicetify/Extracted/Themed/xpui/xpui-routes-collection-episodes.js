"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[289],{90110:(e,t,a)=>{a.d(t,{q:()=>S,o:()=>x});var l=a(67294),r=a.n(l),n=a(94184),i=a.n(n),s=a(69518),o=a.n(s),c=a(50020),u=a(96895),m=a(20657),d=a(83692),g=a(24656),E=a(69010),p=a(80946),y=a(6116),b=a(38209),f=a(40080);const h="l_MW0G9qeeCKlVJwBykT",v="BKsbV2Xl786X9a09XROH",w="HbKLiGoYM4dpuK8L4TMX",k="_APVWqivXc4YqgsnpFkP",C="VmwiDoU6RpqyzK_n7XRO",P="rEx3EYgBzS8SoY7dmC6x",N="z3zia5snl987x676qe5w";let S;!function(e){e[e.sm=24]="sm",e[e.md=32]="md"}(S||(S={}));const O=e=>{const{currentTarget:t,detail:a}=e;a>0&&t&&t.blur()},x=({uri:e,isFollowing:t,onFollow:a,size:n=S.sm,className:s,onClick:x=(()=>{})})=>{const L={"--size":`${n}px`},{useDownloading:D,useDownloadCapability:I}=(0,l.useContext)(g.I),[A,_]=(0,l.useState)(!1),[R,M]=I(o().isEpisode(e)),[z,F]=(0,l.useState)(!1),{currentAvailability:T,progress:U,beginDownload:Y,clearDownload:q}=D(e);((e,t)=>{const a=(0,b.r)(),r=(0,l.useRef)(!1);(0,l.useEffect)((()=>{e===E.V8.DOWNLOADING&&!1===r.current&&(r.current=!0,a.say(m.ag.get("download.downloading",t.totalItems)))}),[a,e,t]);const n=(0,f.D)(e);(0,l.useEffect)((()=>{n===E.V8.DOWNLOADING&&e===E.V8.YES&&(r.current=!1,a.say(m.ag.get("download.complete")))}),[a,n,e])})(T,U);const $=(0,l.useCallback)((e=>{M===E.v$.DOWNLOADING_NOT_ALLOWED?F(!0):!1===t?(a(),_(!0)):Y(),x(e),O(e)}),[Y,M,t,x,a]),j=(0,l.useCallback)((e=>{q(),O(e),x(e)}),[q,x]);return(0,l.useEffect)((()=>{!0===A&&!0===t&&(Y(),_(!1))}),[t,A,Y]),R===E.PQ.NO_DOWNLOAD_CAPABILITY?null:M===E.v$.DOWNLOADING_NOT_ALLOWED?r().createElement("div",{className:v},r().createElement(d.w,{label:m.ag.get("download.download")},r().createElement("button",{className:i()(w,s),role:"switch",onClick:$,"aria-label":m.ag.get("download.download"),"aria-checked":!1},r().createElement(c.a,{iconSize:n}))),z&&r().createElement("div",{className:N},r().createElement(p.E,{withTopLeftPointer:!0,horizontal:!0,onClose:()=>{F(!1)}},m.ag.get("download.upsell")))):T===E.V8.YES?r().createElement(d.w,{label:m.ag.get("download.remove")},r().createElement("button",{className:i()(w,s,k),role:"switch",onClick:j,"aria-label":m.ag.get("download.remove"),"aria-checked":!0},r().createElement(u.C,{iconSize:n}))):T===E.V8.NO?r().createElement(d.w,{label:m.ag.get("download.download")},r().createElement("button",{className:i()(w,s),role:"switch",onClick:$,"aria-label":m.ag.get("download.download"),"aria-checked":!1},r().createElement(c.a,{iconSize:n}))):r().createElement("div",{className:i()(C,s),role:"switch","aria-checked":!0},r().createElement(d.w,{label:m.ag.get("download.cancel")},r().createElement("button",{style:L,className:i()(w,h,s),onClick:j,"aria-label":m.ag.get("download.cancel")})),r().createElement("span",{style:L,className:i()(P,h)},r().createElement(y.e,{"aria-valuetext":m.ag.get("progress.downloading-tracks"),percentage:U.percentage,size:n})))}},37483:(e,t,a)=>{a.d(t,{p:()=>m,q:()=>c.q});var l=a(67294),r=a.n(l),n=a(65858),i=a(4383),s=a(8475),o=a(56802),c=a(90110);const u=r().memo((({uri:e,size:t=c.q.md,className:a})=>{const[u,m]=(0,i.Z)(e),d=(0,n.I0)(),g=(0,o.o)(),E=(0,l.useCallback)((()=>{g({targetUri:e,intent:u?"remove-from-library":"add-to-library",type:"click"}),m(!u),d(u?(0,s.SS)():(0,s.kK)())}),[g,e,u,m,d]);return r().createElement(c.o,{className:a,isFollowing:u,onFollow:E,uri:e,size:t})})),m=r().memo((e=>r().createElement(u,e)))},14590:(e,t,a)=>{a.d(t,{Q:()=>s,$:()=>o});var l=a(67294),r=a.n(l),n=a(22583),i=a(5292);const s=(0,l.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a LibrarySortProvider")},sortState:i.oT.ADDED_AT}),o=r().memo((function({uri:e,children:t,defaultSortOption:a}){return r().createElement(n.r,{uri:e,defaultState:a,sortContext:s},t)}))},88852:(e,t,a)=>{a.d(t,{E:()=>E});var l=a(67294),r=a.n(l),n=a(98816),i=a(45342),s=a(1496),o=a(61048),c=a(95289),u=a(5292),m=a(14590);const d=r().memo((({sortOptions:e,onSort:t})=>{const{sortState:a,setSortState:n}=(0,l.useContext)(m.Q),i=(0,l.useCallback)((e=>{const a=u.ei[e];null==t||t(a),n(a)}),[t,n]),s=e.map((e=>u.MY[e])),o=u.MY[a];return r().createElement(c.A,{options:s,onSelect:i,selected:o})})),g="QhF9ZR7YOiJeFiEnfkOr",E=r().memo((({filterPlaceholder:e,sortOptions:t})=>{const{spec:a,logger:c}=(0,s.fU)(n.createDesktopSearchBarEventFactory,{}),u=(0,l.useContext)(i.H),m=(0,l.useCallback)((()=>{c.logInteraction(a.filterFieldFactory().keyStrokeFilter())}),[c,a]),E=(0,l.useCallback)((()=>{c.logInteraction(a.filterFieldFactory().hitClearFilter())}),[c,a]),p=(0,l.useCallback)((()=>{c.logInteraction(a.sortButtonFactory().hitSort())}),[c,a]);return r().createElement("div",{className:g},null!=u&&u.getCapabilities().canFilter?r().createElement(l.Suspense,{fallback:null},r().createElement(o.K,{placeholder:e,onFilter:m,onClear:E})):null,null!=u&&u.getCapabilities().canSort?r().createElement(d,{sortOptions:t,onSort:p}):null)}))},72831:(e,t,a)=>{a.r(t),a.d(t,{YourEpisodes:()=>se,YourEpisodesContainer:()=>oe,default:()=>ce});var l=a(67294),r=a.n(l),n=a(9296),i=a(20657),s=a(30947),o=a(55911),c=a(44887),u=a(53646),m=a(45342),d=a(84242),g=a(99995),E=a(4236),p=a(36132),y=a(14590),b=a(88852),f=a(19565),h=a(42273),v=a(59482),w=a(72907),k=a(1663),C=a(55120),P=a(22423),N=a(5292),S=a(56347),O=a(64624),x=a(59713),L=a.n(x),D=a(33241),I=a(42922),A=a(18864),_=a(37763),R=a.n(_),M=a(20246),z=a(18261),F=a(87257),T=a(57978),U=a(75016),Y=a(4383),q=a(24656),$=a(8341),j=a(5944),W=a(42781),B=a(84788),G=a(15212),Z=a(56802),K=a(95661),V=a(25988),X=a(21127),Q=a(95806),H=a(78920),J=a(16783);const ee={small:64,standard:300,large:640,xlarge:1024},te=r().memo((({index:e,contextUri:t,episode:a,onRemove:n,usePlayContextItem:s})=>{var o,c,u,m;const g=(0,l.useRef)(a.duration.milliseconds-a.timeLeft.milliseconds),p=a.uri,[y,b]=(0,l.useState)(0===a.timeLeft.milliseconds),{filter:f}=(0,l.useContext)(P.fo),h=(0,H.P)(),v=(0,G.O1)(),w=(0,A.jh)(),k=(0,Z.o)(),[C]=(0,Y.Z)(p,!0),{useCurrentAvailability:N}=(0,l.useContext)(q.I),[S]=N(p),O=(0,E.k)(),x=(0,$.Y)((e=>{var t;if((null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===a.uri){var l;const t=null!==(l=(0,j.k)(e))&&void 0!==l?l:0;return g.current=t,t}return 0})),{isPlaying:L,isActive:D,togglePlay:_}=s({uri:p,index:e}),{isPlaying:te,isActive:ae,togglePlay:le}=(0,d.n)({uri:p,pages:[{items:[{type:W.p.EPISODE,uri:p,uid:null,provider:null}]}]},{featureIdentifier:"your_library",referrerIdentifier:"your_library"});(0,l.useEffect)((()=>{C||n()}),[C,n]),(0,l.useEffect)((()=>{L||a.duration.milliseconds<=g.current&&b(!0)}),[L,a.duration.milliseconds]);const re=(0,l.useCallback)((e=>{e||(g.current=0),b(e)}),[]),ne=(0,l.useCallback)((()=>{k({type:"click",targetUri:p,intent:"navigate"})}),[p,k]),ie=(0,l.useCallback)((()=>{O?(k({type:"click",intent:L?"pause":"play"}),_()):(k({type:"click",intent:te?"pause":"play"}),le())}),[O,L,te,k,_,le]),se=(0,l.useCallback)((e=>r().createElement(R(),{searchWords:[f],textToHighlight:e,findChunks:h,highlightClassName:J.Z.filterHighlight})),[f,h]),oe=null!==(o=null===(c=a.podcastSubscription)||void 0===c?void 0:c.isPaywalled)&&void 0!==o&&o,ce=null!==(u=null===(m=a.podcastSubscription)||void 0===m?void 0:m.isUserSubscribed)&&void 0!==u&&u,{badges:ue}=(0,B.r)({isExplicit:a.isExplicit,isMOGEFRestricted:a.is19PlusOnly,isPaywalled:oe});let me=!1;return(D||!O&&ae)&&(me=!0),C?r().createElement(I.ZP,{value:"row",index:e},r().createElement(z._,{menu:r().createElement(V.k,{uri:p,showUri:a.show.uri,isPlayed:y,onMarkAsPlayed:re})},r().createElement(X.X,{index:e,uri:p,uid:p,size:w,images:a.images.map((e=>({url:e.url,width:e.width||(e.label?ee[e.label]:null),height:e.height||(e.label?ee[e.label]:null)}))),isPaywalled:oe,isUserSubscribed:ce,name:a.name,highlightText:se,showName:a.show.name,showUri:a.show.uri,description:a.description,isPlayable:a.isPlayable&&S,fullyPlayed:y,durationMs:a.duration.milliseconds,releaseDate:a.release.date.toString()||"",resumePositionMs:g.current,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const l=`${a.name} Â· ${a.show.name}`;v(e,[p],l,t)},handlePlaybackClick:ie,handleClick:ne,isCurrentlyPlaying:me,isPlaying:O?L:te,position:me?x:void 0,episodeSharingInfo:null,onMarkAsPlayed:re,badges:r().createElement(r().Fragment,null,ue.explicit&&r().createElement(F.N,null),ue.paid&&r().createElement(U.g,null),ue.nineteen&&r().createElement(T.X,{size:16})),playButtonWrapper:e=>r().createElement(Q.l,{enabled:oe&&!ce,showUri:a.show.uri},e),topActionButtons:r().createElement(M.y,{menu:r().createElement(V.k,{uri:p,showUri:a.show.uri,isPlayed:y,onMarkAsPlayed:re})},r().createElement(K.z,{size:K.q.sm,label:i.ag.get("more.label.context",a.name)}))}))):null})),ae="ybohLfAC_k3fYjRJHzKA",le="rQL2Hxclr2PkKkrBfr8T";function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(Object(a),!0).forEach((function(t){L()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const ie=r().memo((({contextUri:e,usePlayContextItem:t})=>{const a=(0,l.useContext)(m.H),{sortState:n}=(0,l.useContext)(y.Q),[i,s]=(0,l.useState)({totalLength:0,offset:0,items:[],limit:50}),o=(0,l.useRef)(!1),c=(0,l.useRef)(0),u=(0,l.useRef)(0),{filter:d}=(0,l.useContext)(P.fo),g=(0,l.useCallback)((()=>{u.current++}),[]),{ref:E,breakpoint:p}=(0,A.Db)({[A.Uo.MEDIUM]:0,[A.Uo.LARGE]:600}),b=(0,l.useCallback)(((e=!1)=>{const t=c.current;null!==t&&(o.current||(o.current=!0,(async e=>{const t=await a.getEpisodes({offset:e-u.current,limit:50,sort:(0,N.sv)(n),filter:d});return u.current=0,t})(Number(t)).then((a=>{s((l=>{const r=Number(a.offset)+a.items.length,n=e?[]:[...l.items];return n.splice(Number(t),a.items.length,...a.items),c.current=r<a.totalLength?r:null,ne(ne({},a),{},{items:n})})),o.current=!1}))))}),[d,a,n]);return(0,l.useEffect)((()=>{c.current=0,b(!0)}),[b]),r().createElement(A.ZU.Provider,{value:p},r().createElement(I.ZP,{value:"track-list"},r().createElement("div",{ref:E},r().createElement(D.C,{onReachBottom:b,triggerOnInitialLoad:!0},i.items.map(((a,l)=>r().createElement("div",{className:le,key:`${l}${a.uri}`},r().createElement("hr",{className:ae,"aria-hidden":!0}),r().createElement(te,{key:`${a.uri}/${l}`,index:l,episode:a,contextUri:e,onRemove:g,usePlayContextItem:t}))))))))})),se=({metadata:e,canSort:t})=>{const a=(0,u.Y5)("#006450"),{sortState:m}=(0,l.useContext)(y.Q),{filter:k}=(0,l.useContext)(P.fo),S=(0,E.k)(),{isPlaying:x,togglePlay:L,usePlayContextItem:D}=(0,d.n)({uri:e.uri,metadata:{[g.sb.SORTING_CRITERIA]:(0,N._s)(m),[g.sb.FILTERING_PREDICATE]:(0,p.aK)(k)}},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),I=()=>L(),{uri:A,name:_,images:R,totalLength:M,owner:z}=e,F=(0,l.useMemo)((()=>({id:z.username,uri:z.uri,name:z.username,displayName:z.displayName||void 0,images:z.images||[]})),[z]),T=e.totalLength>0;return r().createElement("section",{className:J.Z.yourEpisodes,"data-testid":"your-episodes-page"},r().createElement(h.gF,{backgroundColor:a},r().createElement(v.W,null,r().createElement(C.$,{size:o.qE.sm,onClick:I,isPlaying:x,uri:A,disabled:!S,ariaPlayLabel:i.ag.get("playlist.a11y.play",_),ariaPauseLabel:i.ag.get("playlist.a11y.pause",_)}),r().createElement(w.i,{text:_})),r().createElement(h.Oz,{images:R,name:_,shape:c.K.ROUNDED_CORNERS,renderImage:()=>r().createElement(O.$,null)}),r().createElement(h.sP,null,r().createElement(h.dy,{small:!0,uppercase:!0},i.ag.get("playlist")),r().createElement(h.xd,{canEdit:!1,onClick:()=>{}},_),r().createElement(h.QS,{creators:[F],totalEpisodes:M}))),r().createElement("div",{className:J.Z.yourEpisodesContentWrapper},r().createElement(s.o,{backgroundColor:a},r().createElement(s.F,null,T&&r().createElement(C.$,{onClick:I,isPlaying:x,size:o.qE.lg,uri:A,disabled:!S,ariaPlayLabel:i.ag.get("playlist.a11y.play",_),ariaPauseLabel:i.ag.get("playlist.a11y.pause",_)}),t&&r().createElement("div",{className:J.Z.searchBoxContainer},r().createElement(b.E,{filterPlaceholder:i.ag.get("playlist.search_in_playlist"),sortOptions:N.$2})))),r().createElement("div",{className:"contentSpacing"},e.totalLength>0&&r().createElement(ie,{contextUri:A,usePlayContextItem:D}))),0===e.totalLength&&r().createElement("div",{className:"contentSpacing"},r().createElement(f.u,{message:i.ag.get("collection.empty-page.episodes-subtitle"),title:i.ag.get("collection.empty-page.episodes-title"),linkTo:"/genre/podcasts-web",linkTitle:i.ag.get("collection.empty-page.shows-cta"),renderInline:!0},r().createElement(n.Z,null))))},oe=r().memo((()=>{const e=(0,l.useContext)(m.H).getCapabilities(),t=(0,S.x)();return t?r().createElement(y.$,{uri:t.uri,defaultSortOption:N.oT.ADDED_AT},r().createElement(P.hz,{uri:t.uri},r().createElement(se,{metadata:t,canSort:e.canSort&&t.totalLength>0}))):r().createElement(k.h,{hasError:!1,errorMessage:i.ag.get("error.not_found.title.page"),loadOffline:e.canModifyOffline})})),ce=oe},40080:(e,t,a)=>{a.d(t,{D:()=>r});var l=a(67294);function r(e){const t=(0,l.useRef)();return(0,l.useEffect)((()=>{t.current=e}),[e]),t.current}},92408:(e,t,a)=>{a.d(t,{E:()=>L,$:()=>x});var l=a(67294),r=a.n(l),n=a(43315),i=a(59713),s=a.n(i);const o="wIA_5Ypq0rltNPeZQpM4",c="Swi6YtNEFCCVz8l4y75v",u="pklLPOhfigdytL9bPoth",m="sb24Y8kdMZInJ8aI8dXT";class d extends l.PureComponent{render(){const{ariaValueText:e,max:t,current:a}=this.props,l=t&&a?100*Math.min(1,a/t):0,n={transform:`translateX(-${100-l}%)`},i=e||`${Math.round(l)}%`;return r().createElement("div",{className:o,role:"progressbar",tabIndex:0,"aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":t,"aria-valuetext":i},r().createElement("div",{className:c}),r().createElement("div",{className:u},r().createElement("div",{className:m,style:n})))}}s()(d,"defaultProps",{current:0,max:1});const g=d,E="qfYkuLpETFW3axnfMntO",p="jOd7lbjiyc_kvRJaAbeL",y="_q93agegdE655O5zPz6l",b="z7Yl7CIT1AB0y91f_moh",f="iLIlkUcfIq56KncGtX7u",h="nV50yZ6BR_TIuWP3l7b1",v="qLjIx_SzBEpDRA_q7kxQ";var w=a(96685),k=a(40378),C=a(20657),P=a(76343),N=a(94184),S=a.n(N),O=a(33985);let x;!function(e){e[e.LARGE=0]="LARGE",e[e.SMALL=1]="SMALL"}(x||(x={}));const L=e=>{const{resumePositionMs:t=0,releaseDate:a,isPlaying:l,fullyPlayed:i,durationMs:s,size:o=x.SMALL,position:c=t}=e;return r().createElement("div",{className:S()(E,{[p]:o===x.LARGE})},a?r().createElement(P.Dy.p,{variant:w.LF.mesto,className:y},(0,n.rL)((0,n.RX)(a))):null,(()=>{if(i&&!l)return r().createElement("div",{className:f},r().createElement(P.Dy.p,{variant:w.LF.mesto,className:b},C.ag.get("episode.played")),r().createElement(k.R,{iconSize:16,className:v}));if(c>0||l){const e=Math.ceil(Math.max(s-c,0));return r().createElement("div",{className:f},r().createElement(P.Dy.p,{variant:w.LF.mesto,className:b},r().createElement(O.ng,{durationMs:e})))}return r().createElement(P.Dy.p,{variant:w.LF.mesto,className:y},r().createElement(O.nL,{durationMs:s}))})(),!i&&c>0||l?r().createElement("div",{className:h},r().createElement(g,{current:c,max:s,isEnabled:!1})):null)}}}]);
//# sourceMappingURL=xpui-routes-collection-episodes.js.map