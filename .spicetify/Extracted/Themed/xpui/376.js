"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[376],{69376:(e,n,i)=>{i.r(n),i.d(n,{Album:()=>re,default:()=>ue,getAlbumType:()=>oe});var a=i(67294),t=i.n(a),l=i(16528),d=i(96685),m=i(26115),s=i(74594),o=i(20657),r=i(30947),c=i(11414),u=i(55911),k=i(32626),v=i(20246),S=i(94233),g=i(76343),N=i(53646),p=i(98984),F=i(4383),b=i(84242),y=i(7073),h=i(1663),E=i(56802),f=i(80322),A=i(4236),w=i(42811),C=i(90110),D=i(95661),I=i(13768),T=i(4232),x=i(70369),M=i(42273),P=i(59482),U=i(72907),L=i(6479),z=i.n(L),B=i(18937),V=i(74380),q=i(6489),R=i(91931),W=i(38894);const Y=({children:e,content:n,onIntercept:i=(()=>{})})=>{const a=(0,W.g)();let l;try{l=t().Children.only(e)}catch(n){return t().createElement(t().Fragment,null,e)}return a?t().createElement(R.Nt,{trigger:"click",action:"open",placement:"bottom",offset:[0,20],content:n},t().cloneElement(l,{onClick:i})):t().createElement(t().Fragment,null,e)};var Z=i(65858),_=i(16229),H=i(1447),$=i(42922),O=i(70108);const X={container:"WHINADihyTCx2VFxwY8X"},j=({title:e,description:n})=>{const i=(0,Z.I0)(),l=(0,H.qT)(),m=(0,E.o)();return(0,a.useEffect)((()=>{m({intent:"open-upsell",type:"view"})}),[m]),t().createElement(R.yv,null,t().createElement("div",{className:X.container},t().createElement(g.Dy.p,{className:X.title,variant:d.LF.cello},e),t().createElement(g.Dy.p,{className:X.description,variant:d.LF.mesto},n),t().createElement("div",{className:X.buttonContainer},t().createElement(_.Y,{className:X.secondaryButton,version:"tertiary",onClick:()=>{m({intent:"close-upsell",type:"click"}),l({type:"close"})}},o.ag.get("action-trigger.button.not-now")),t().createElement(_.Y,{className:X.primaryButton,version:"primary",onClick:()=>{m({intent:"login",type:"click"}),i((0,O.sX)())}},o.ag.get("login")))))},K=e=>t().createElement($.ZP,{value:"tooltip-with-cta"},t().createElement(j,e)),Q=["uri"],G=e=>{let{uri:n}=e,i=z()(e,Q);const a=(0,V.j5)();return t().createElement(Y,{content:t().createElement(K,{title:o.ag.get("action-trigger.save-library"),description:o.ag.get("action-trigger.save-album")}),onIntercept:()=>a.storeAction(B.wH,{operation:q.pT.ADD,uris:[n]})},t().createElement(c.H,i))};var J=i(55120),ee=i(19480),ne=i(36685);const ie={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getAlbumMetadata"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"album"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumArtists"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumCoverArt"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumDiscs"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumTracksMetadata"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumReleases"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"date"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}},{kind:"Field",name:{kind:"Name",value:"precision"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"copyright"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"text"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"courtesyLine"}},{kind:"Field",name:{kind:"Name",value:"saved"}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"}},{kind:"Field",name:{kind:"Name",value:"shareId"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"moreAlbumsByArtist"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumArtists"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumCoverArt"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorRaw"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumDiscs"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"discs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"tracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumTracksMetadata"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumReleases"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"releases"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"moreAlbumsByArtist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"moreAlbumsByArtist"},name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"popularReleases"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"releases"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"date"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"year"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareId"}},{kind:"Field",name:{kind:"Name",value:"shareUrl"}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]};var ae=i(69518),te=i.n(ae),le=i(30005),de=i(21691);const me=({releases:e})=>t().createElement(le.v,null,e.map((e=>t().createElement(de.s,{key:e.uri,role:"menuitem",to:te().from(e.uri).toURLPath(!0)},e.name)))),se={album:"AzMeWBwDTXKzRBwYrMPA",albumWindowedMessage:"hM03zfC8SwDgrQj47qF3",albumWindowedMessageHeader:"Iqz89ir4iipYd5S9Zacw",albumWindowedMessageDescription:"gqmBZrZzSFhS7qnAeATS",moreAlbumsByArtist:"x-album-moreAlbumsByArtist",releasesDropdown:"Oes6sSZfoFflriJ35Vzb",footer:"DFSx0Puh2BjCKWFTvXgg"};function oe(e){switch(e){case y.VZ.Single:return o.ag.get("single");case y.VZ.Ep:return o.ag.get("ep");case y.VZ.Compilation:return o.ag.get("compilation");case y.VZ.Album:default:return o.ag.get("album")}}const re=({uri:e,album:n})=>{var i,p,h,L,z,B,V,q,R,W,Y,Z,_;const H=(0,l.k6)(),$=(0,E.o)(),O=(0,A.k)(),X=null===(i=n.moreAlbumsByArtist)||void 0===i||null===(p=i.items[0])||void 0===p||null===(h=p.discography)||void 0===h||null===(L=h.popularReleases)||void 0===L?void 0:L.items,[j,K]=(0,F.Z)(e),Q=parseInt(new URLSearchParams((0,l.TH)().search).get("index")||"0",10),ie=(0,f.Y)(e),{usePlayContextItem:ae,togglePlay:te,isPlaying:le}=(0,b.n)({uri:ie},{featureIdentifier:"album"}),de=(0,a.useCallback)((async()=>{$({targetUri:e,intent:j?"unsave":"save",type:"click"});try{await K(!j)}catch{}}),[$,e,j,K]),re=(0,a.useCallback)((()=>new URLSearchParams(H.location.search.slice(1)).get("highlight")||""),[H.location.search]),ce=n.uri,ue=n.name,ke=n.type,ve=null===(z=n.date)||void 0===z?void 0:z.isoString,Se=n.tracks.totalCount,ge=((null===(B=n.coverArt)||void 0===B?void 0:B.sources)||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),Ne=null===(V=n.coverArt)||void 0===V||null===(q=V.extractedColors)||void 0===q?void 0:q.colorRaw.hex,pe=n.artists.items.map((e=>{var n;return{name:e.profile.name,images:((null===(n=e.visuals.avatarImage)||void 0===n?void 0:n.sources)||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),uri:e.uri,id:e.uri}})),Fe=n.tracks.items.some((e=>e.track.playability.playable)),be=n.playability.reason===y.Ku.CatalogueRestricted,ye=(0,a.useMemo)((()=>({total_count:n.discs.totalCount,items:n.discs.items.map((e=>({number:e.number,total_tracks:e.tracks.totalCount})))})),[n.discs]),he=n.copyright.items,Ee=n.courtesyLine,fe=n.tracks.items.reduce(((e,n)=>e+n.track.duration.totalMilliseconds),0),Ae=n.tracks.items.length>0?fe/n.tracks.items.length*n.tracks.totalCount:0,we=n.tracks.items.length<n.tracks.totalCount,Ce=re(),De=O;return(0,N.Y5)(Ne||null),t().createElement("section",{className:se.album,"data-testid":"album-page"},t().createElement(x.$,null,o.ag.get("album.page-title",n.name)),t().createElement(M.gF,{backgroundColor:Ne},t().createElement(P.W,null,t().createElement(J.$,{size:u.qE.sm,onClick:()=>te(),disabled:!Fe,isPlaying:le,uri:e}),t().createElement(U.i,{text:ue,dragUri:e,dragLabel:ue})),t().createElement(k._P,{menu:t().createElement(T.Y,{uri:n.uri,artistUri:null==pe||null===(R=pe[0])||void 0===R?void 0:R.uri,sharingInfo:n.sharingInfo})},t().createElement(M.Oz,{dragUri:ce,images:ge,name:ue,placeholderType:"album"})),t().createElement(M.sP,null,t().createElement(M.dy,{small:!0,uppercase:!0},oe(ke)),t().createElement(k._P,{menu:t().createElement(T.Y,{uri:n.uri,artistUri:null==pe||null===(W=pe[0])||void 0===W?void 0:W.uri,sharingInfo:n.sharingInfo})},t().createElement(M.xd,{dragUri:n.uri,dragLabel:n.name},ue)),t().createElement(M.QS,{creators:pe,releaseDate:ve,totalTracks:Se,durationMilliseconds:Ae,isEstimatedDuration:we}))),t().createElement(r.o,{backgroundColor:Ne},t().createElement(r.F,null,t().createElement(J.$,{onClick:()=>te(),disabled:!Fe,isPlaying:le,size:u.qE.lg,uri:e}),t().createElement(G,{isAdded:!!j,onClick:de,disabled:!O,size:c.q.md,uri:e}),De?t().createElement(C.o,{uri:e,isFollowing:!!j,onFollow:de,size:C.q.md}):null,t().createElement(v.y,{menu:t().createElement(T.Y,{uri:n.uri,artistUri:null==pe||null===(Y=pe[0])||void 0===Y?void 0:Y.uri,sharingInfo:n.sharingInfo})},t().createElement(D.z,{label:o.ag.get("more.label.context",ue)})))),be?t().createElement("div",{className:se.albumWindowedMessage},t().createElement(g.Dy,{as:"h2",variant:d.LF.cello,className:se.albumWindowedMessageHeader},o.ag.get("windowed.product-album-header")),t().createElement("div",{className:se.albumWindowedMessageDescription},o.ag.get("windowed.product-album-description"))):null,t().createElement("div",{className:"contentSpacing"},t().createElement(ne.L,{ariaLabel:ue,nrTracks:Se,discs:ye,albumUri:ce,highlightUri:Ce,scrollToIndex:Q,usePlayContextItem:ae}),t().createElement("div",{className:se.footer},t().createElement(S.k,{copyrights:he,courtesyLine:Ee}),n.releases.items.length>0&&t().createElement(k.xV,{menu:t().createElement(me,{releases:n.releases.items})},((e,i,a)=>t().createElement("button",{ref:a,className:se.releasesDropdown,type:"button",onClick:i},t().createElement(g.Dy,{as:"span",variant:d.LF.mesto},o.ag.get("album-page.more-releases",n.releases.items.length)),e?t().createElement(m.q,{className:se.chevron,iconSize:16}):t().createElement(s.m,{className:se.chevron,iconSize:16})))))),(null==X?void 0:X.length)>0&&t().createElement("div",{className:"contentSpacing"},t().createElement(ee.P,{className:se.moreAlbumsByArtist,title:o.ag.get("album-page.more-by-artist",null==pe||null===(Z=pe[0])||void 0===Z?void 0:Z.name),total:X.length,seeAllUri:`${null==pe||null===(_=pe[0])||void 0===_?void 0:_.uri.replace("artist","app:artist")}:discography`,seeAllLabel:o.ag.get("artist-page.show-discography"),alwaysShowSeeAll:!0},X.map(((e,n)=>{var i,a,l,d,m;return t().createElement(I.i,{index:n,key:null===(i=e.releases)||void 0===i||null===(a=i.items)||void 0===a||null===(l=a[0])||void 0===l?void 0:l.uri,entity:(0,w.B$)(e.releases.items[0],null==pe||null===(d=pe[0])||void 0===d?void 0:d.uri,null==pe||null===(m=pe[0])||void 0===m?void 0:m.name)})})))))},ce=t().memo((()=>{const{albumId:e}=(0,l.UO)(),n=`spotify:album:${e}`,{loading:i,error:a,data:d}=(m={uri:n},s={cacheTime:15*p.y},(0,p.a)(ie,m,s));var m,s;return i||null==d||!d.album?t().createElement(h.h,{hasError:null!==a,errorMessage:o.ag.get("error.not_found.title.album")}):t().createElement(re,{uri:n,album:d.album})})),ue=ce},38894:(e,n,i)=>{i.d(n,{g:()=>l});var a=i(65858),t=i(29255);const l=()=>(0,a.v9)(t.Gg).isAnonymous}}]);
//# sourceMappingURL=376.js.map