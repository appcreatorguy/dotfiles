"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[835],{40165:(e,t,a)=>{a.r(t),a.d(t,{CollectionConcerts:()=>x,default:()=>J});var n=a(67294),c=a.n(n),o=a(65858),r=a(73012),l=a(44794),i=a(44503),s=a(70369),m=a(29255),u=a(20657),g=a(51574),d=a(42922),h=a(31595),_=a(6581),E=a(7679),L=a(18245),y=a(19565),v=a(42273),b=a(59482),p=a(72907),f=a(1663),N=a(19480);const k="FqqGmylJTvbVkjiIX2eL",C="BUGk_fxRbfJzRml1EewP",D="F9Va5nmgay71lz4V2GLN",S={Online:u.ag.get("concerts_upcoming_virtual_events"),Recommended:u.ag.get("concerts_recommended_for_you"),Popular:u.ag.get("concerts_popular_near_you"),Playlists:u.ag.get("playlists")},w=r.jN0,F=e=>{const{collection:t,concertMetadata:a,handleLocationChange:n,shouldCombineRecs:o}=e,r=(null==t?void 0:t.items)||[],l=null==t?void 0:t.isFetching,i=a.userLocation.name||u.ag.get("concerts.default_location"),s=e=>{if(!e.concerts||!e.concerts.length)return null;const t=e.concerts[0];return c().createElement(E.k,{key:t.uri,entity:t,isVirtual:o?"ONLINE"===t.category:"online"===e.source,shouldCombineRecs:o})};if(l)return c().createElement(f.h,{hasError:!1,errorMessage:u.ag.get("error.request-browse-concerts-failure")});return c().createElement("div",{className:D},c().createElement("div",{className:k,"data-testid":"location-selector"},c().createElement(L.Z,{handleLocationChange:n,locationStr:i})),(()=>{if(!r.length)return c().createElement(y.u,{title:u.ag.get("concerts.error.no_concerts_found_title"),message:u.ag.get("concerts.error.no_concerts_found_message",i)});const e=r.reduce(((e,t)=>("recommendation"===t.source?e.Recommended.push(t):"popular"===t.source?e.Popular.push(t):"online"===t.source&&e.Online.push(t),e)),{Online:[],Recommended:[],Popular:[]});return Object.keys(e).map(((t,a)=>{const n=e[t];return 0===n.length?null:c().createElement("div",{key:t,className:k},c().createElement(d.ZP,{value:"headered-grid",index:a},c().createElement(N.P,{total:n.length,title:S[t],showAll:!0},n.map(s))))}))})())},I=c().memo((()=>{const e=(0,o.I0)(),t=(0,l.W6)(i.AW),{isAnonymous:a}=(0,o.v9)(m.Gg),r=(0,o.v9)((e=>e.concerts.collection)),d=(0,o.v9)((e=>e.concerts)),E=d.userLocation.name||u.ag.get("concerts.default_location");(0,n.useEffect)((()=>{e((0,_.AJ)(null,a))}),[e,a]);const L=(0,h.Y)(w);return c().createElement("section",{className:C},c().createElement(s.$,null,`${u.ag.get("concerts_shows_in")} ${E}`),c().createElement(v.gF,{size:v.fR.SMALL,backgroundColor:w},c().createElement(v.sP,null,c().createElement(v.xd,null,u.ag.get("concerts.label"))),c().createElement(b.W,null,c().createElement(p.i,{text:u.ag.get("concerts.label")}))),c().createElement(g.I,{backgroundColor:L}),c().createElement(F,{collection:r,concertMetadata:d,handleLocationChange:t=>{t&&t.geonameId&&e((0,_.AJ)(t.geonameId,a))},shouldCombineRecs:t}))})),x=e=>c().createElement(n.Suspense,{fallback:null},c().createElement(I,e)),J=x},7679:(e,t,a)=>{a.d(t,{k:()=>k});var n=a(67294),c=a.n(n),o=a(97493),r=a(64656),l=a(96685),i=a(94880),s=a(76343),m=a(43315),u=a(25340),g=a(67892);const d="lKqKagNqQ8VlvdFmruT3",h="Z2uK7sMMyCWb6pniuNXi",_="NIMwRV_NRJ13Vqumxn_j",E="t5KPIGEuuRNJCJOxPA1o",L="_32BBOf0wCFJBS35JKFU0",y="vdvOAp_f8lhHOp7y1BqJ",v="qHSZnGIgaXfml2KOzmbd",b="zX69m46sU0G_VEwc4Fiy",p="lKkeD_aRHPt1Sb7cc031",f="hBa5HsnSqAQj7ngrUaoq",N="WD2YMKFx0lQZSbihWLOR",k=c().memo((e=>{const{entity:t,isVirtual:a,shouldCombineRecs:n}=e,{venue:{name:k,location:{name:C}}}=t,D=t.artists[0],S=(0,u.ij)(t),w=new Date(t.date.isoString),F=a?o.q:r.K;return c().createElement(g.r,{to:`/concert/${t.id}`,className:d},D.imageUri?c().createElement(i.Z,null,c().createElement("div",{"data-testid":"image-container",className:N,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${D.imageUri})`}})):null,c().createElement("time",{className:h,dateTime:t.date.isoString},c().createElement(s.Dy.h5,{variant:l.LF.minuetBold,className:_},(0,u.lJ)(w)),c().createElement(s.Dy.h1,{variant:l.LF.canon,className:E},w.getDate())),c().createElement("div",{className:L,dir:"auto"},c().createElement(s.Dy.h2,{className:f,variant:l.LF.minuetBold},(0,m.FO)(w),", ",(0,u.b8)(w)),c().createElement(s.Dy.h2,{variant:l.LF.cello,weight:l.LF.bold,className:y},S),c().createElement("div",{className:v},n?c().createElement(F,{className:b,"aria-label":a?"Virtual Event":"In-Person Event",iconSize:16}):null,c().createElement(s.Dy.h2,{className:p,variant:l.LF.mesto,"data-testid":"location-name"},a?k:`${k}, ${C}`))))}))},18245:(e,t,a)=>{a.d(t,{Z:()=>f});var n=a(67294),c=a.n(n),o=a(94184),r=a.n(o),l=a(40160),i=a(86912),s=a(8455),m=a(96685),u=a(20657),g=a(98742),d=a(76343),h=a(80624),_=a(25237),E=a(29854);const L={locationContainer:"bH2kPQ5zw1hLCwpWXGGy",locationName:"CZHxaQ5LgtirQvf9Unjx",clearSuggestions:"nPmfHJAB2cFMM9BekCcp",hide:"WmgD8cdy4nG4XBNIO7wJ",changeLocation:"dmmS1BV6JiIcwmD5oTzk",changeLocationDropdown:"n3vaiTuGhBV97WsJ6Zmk",changeLocationInputLabel:"C6NHL3DpQg1P_Kn17nRQ",changeLocationInput:"GLw2a0iCnksbb95n9Uxb",searchInputSearchIcon:"bZEIsokqSuv6PC6x9yPI",changeLocationLabel:"xvdlJPLpxB3UU8F2BDUl",icon:"ZjO209jguit9txCu59ou",changeLocationList:"nfDD3WtVxTUJoHe_XqKs",changeLocationError:"V8EzYUuVJXyfFjyw9Gyz",changeLocationLink:"yJ0x9sVyyDY_aN8Zgu4i",changeLocationItem:"o5i4vbKhh1lViFIVgOc9",button:"qDHCmOVcAjUHggyCn8D4",locationLink:"tc9UlCgbKbc9J2Jtj63x"},y="location_no_results",v="location_fetch_error",b={[y]:u.ag.get("concert.error.no_locations_found_subtitle"),[v]:u.ag.get("concert.error.general_error_title")},p=e=>{const t=c().createRef(),a=c().createRef(),[o,p]=(0,n.useState)(""),[f,N]=(0,n.useState)(-1),[k,C]=(0,n.useState)([]),[D,S]=(0,n.useState)(null),{placeholder:w,onSelectLocation:F,hideLocationSelector:I}=e,x=(0,E.D)((()=>{_.LH.fetchLocationQuery(h.b.getInstance(),o).then((e=>{const{body:{results:t=[]}={}}=e;C(t),t.length?S(null):S(y)}),(()=>{C([]),S(v)}))}))(250),J=e=>{p(e),N(-1),C([]),S(null),e&&e.length>1&&x(e)};let O=r()(L.clearSuggestions,L.hide);return(k&&k.length||D===y)&&(O=L.clearSuggestions),c().createElement("div",{className:L.changeLocation,"data-interaction-context":"location-selector"},c().createElement("div",{className:L.changeLocationDropdown,onKeyDown:e=>{const n=38,c=40,o=27,r=9,l=e.which;let i=f;switch([o,c,n,r].indexOf(l)>-1&&e.preventDefault(),l){default:return;case o:return void F(null);case n:i=Math.max(f-1,-1);break;case c:case r:i=Math.min(f+1,k.length-1);break;case 13:F(k[f])}if(i<0)t.current.focus();else{const e=a.current.childNodes[i];e&&e.focus()}N(i)},role:"searchbox",onBlur:e=>{e.relatedTarget||(J(""),I())}},c().createElement("div",{className:L.changeLocationForm},c().createElement("div",{className:L.changeLocationLabel},c().createElement(i.z,{className:L.icon,iconSize:16}),c().createElement("input",{className:L.changeLocationInput,type:"search",id:"change-location-input",placeholder:w,value:o,onChange:e=>J(e.target.value),ref:t,"aria-label":w,autoFocus:!0}),c().createElement("button",{className:O,"aria-label":u.ag.get("search.a11y.clear-input"),onClick:()=>J("")},c().createElement(g.T,{size:16})))),c().createElement("ol",{className:L.changeLocationList,ref:a},D&&c().createElement(d.Dy.li,{className:L.changeLocationError},c().createElement(s.Z,{iconSize:16}),b[D]),k&&k.length&&k.map(((e,t)=>c().createElement(d.Dy.li,{weight:m.LF.book,key:t,className:L.changeLocationItem,tabIndex:t+1},c().createElement(l.rU,{to:"#",className:L.changeLocationLink,onClick:()=>F(e),role:"button"},e.location))))||null)))},f=e=>{const{handleLocationChange:t,locationStr:a}=e,[o,r]=(0,n.useState)(!1);return c().createElement("div",{className:L.locationContainer},c().createElement(d.Dy.h1,{variant:m.LF.alto},u.ag.get("concerts_shows_in")),c().createElement("span",null,o&&c().createElement(p,{placeholder:u.ag.get("concerts.input.search_placeholder"),onSelectLocation:e=>{t(e),r(!1)},hideLocationSelector:()=>r(!1)}),!o&&c().createElement(d.Dy.h2,{variant:m.LF.alto,className:L.locationName,dir:"auto",onClick:r,role:"button"},a)))}},25340:(e,t,a)=>{a.d(t,{Ms:()=>c,b8:()=>o,lJ:()=>r,NL:()=>l,O1:()=>i,Yl:()=>u,ij:()=>g});var n=a(20657);const c=e=>n.ag.formatDate(e,{weekday:"short",month:"short",day:"numeric"}),o=e=>n.ag.formatDate(e,{hour:"numeric",minute:"numeric"}),r=e=>n.ag.formatDate(e,{month:"short"}).toUpperCase(),l=e=>n.ag.formatDate(e,{month:"short",day:"numeric"}).toUpperCase(),i=e=>e<new Date,s={row:{1:e=>n.ag.get("concert.header.entity_title_1",...e),2:e=>n.ag.get("concert.header.entity_title_2",...e),3:e=>n.ag.get("concert.header.entity_title_3",...e),4:e=>n.ag.get("concert.header.entity_title_4",...e),more:e=>n.ag.get("concert.header.entity_title_more",...e)},entity:{1:e=>n.ag.get("concert.header.upcoming_concert_title_1",...e),2:e=>n.ag.get("concert.header.upcoming_concert_title_2",...e),3:e=>n.ag.get("concert.header.upcoming_concert_title_3",...e),4:e=>n.ag.get("concert.header.upcoming_concert_title_4",...e),more:e=>n.ag.get("concert.header.upcoming_concert_title_more",...e)}},m=(e,t)=>{const a=s[t],n=(e=>{try{var t;return!e.title||!e.festival&&null!==(t=e.artists)&&void 0!==t&&t.length?{artists:e.artists.map((e=>e.name||e.profile.name))}:{title:e.title}}catch(e){return null}})(e);if(n){if(n.title)return n.title;if(n.artists)return n.artists.length>4?a.more(n.artists):a[n.artists.length](n.artists)}return""},u=e=>m(e,"row"),g=e=>m(e,"entity")},70369:(e,t,a)=>{a.d(t,{$:()=>n.$});var n=a(22578)},19565:(e,t,a)=>{a.d(t,{u:()=>E});var n=a(67294),c=a.n(n),o=a(94184),r=a.n(o),l=a(96685),i=a(76343),s=a(39561),m=a(62890);const u="FvfvGU3jvHRskUU9v9_8",g="Q9AlbZn2EGzy3MTWXa8X",d="mxmxS0y8LiwSs5nueKPT",h="GXxVAveNFStY3pBI_NO4",_="eHcXC2s97InYP7rMNT0H",E=c().memo((e=>{const{children:t,message:a,title:n,linkTitle:o,linkTo:E,onClick:L,renderInline:y=!1}=e,{isXSOnly:v,isSMOnly:b}=(0,s.e)(),p=v||b;return c().createElement("section",{className:r()(u,{[g]:y})},t,c().createElement(i.Dy.h1,{variant:p?l.LF.cello:l.LF.alto,className:h},n),c().createElement(i.Dy,{variant:p?l.LF.mesto:l.LF.ballad,className:_},a),o&&(E||L)&&c().createElement(m.z,{version:"secondary",className:d,linkTo:E,onClick:L},o))}))}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map