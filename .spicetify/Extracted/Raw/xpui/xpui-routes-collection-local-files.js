"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[379],{65673:(e,t,l)=>{l.r(t),l.d(t,{default:()=>V});var r=l(59713),n=l.n(r),a=l(67294),i=l.n(a),o=l(73012),c=l(52482),s=l(20657),u=l(30947),m=l(55911),d=l(31595),g=l(72131),f=l(90464),E=l(66393),p=l(23248),y=l(84242),b=l(1169),h=l(36132),x=l(19565),k=l(42273),C=l(59482),P=l(72907),v=l(61048),D=l(1663),S=l(55120),R=l(32129),O=l(22423),I=l(68942),w=l(28248),T=l(78462),j=l(42922),A=l(49961),U=l(37763),_=l.n(U),B=l(18261),N=l(87257),Q=l(84788),z=l(26921),F=l(27481),M=l(78920),Z=l(82760),K=l(83384);const L=i().memo((({uri:e,uid:t,name:l,duration_ms:r,artists:n,album:o,isMOGEFRestricted:c,isExplicit:u,isPlayable:m,index:d,contextUri:g,imgUrl:f,usePlayContextItem:E})=>{const{filter:p}=(0,a.useContext)(O.fo),{isActive:y,isPlaying:b,triggerPlay:h,togglePlay:x}=E({uid:t,uri:e,index:d}),k=(0,M.P)(),{badges:C,hasBadges:P}=(0,Q.r)({isExplicit:u}),v=(null==n?void 0:n.map((e=>e.name)).join(s.ag.getSeparator()))||"";return i().createElement(j.ZP,{value:"row",index:d},i().createElement(B._,{menu:i().createElement(z.N,{uri:e,uid:t,contextUri:g})},i().createElement(Z.c,{uri:e,contextUri:g,isActive:y,index:d,onTriggerPlay:()=>{h()},ariaRowIndex:d+1,isPlayable:m,ageRestricted:c,dragMetadata:{name:l,createdBy:v}},i().createElement(F.Dd,{ariaColIndex:0},i().createElement(F.Du,{uri:e,playAriaLabel:s.ag.get("tracklist.a11y.play",l,v),isPlaying:b,isActive:y,onClick:()=>{x()}},i().createElement(F.km,null,d+1))),i().createElement(F.vZ,{ariaColIndex:1},i().createElement(F.lD,{src:f}),i().createElement(F.vm,null,i().createElement(F.Wh,{titleText:l},i().createElement(_(),{searchWords:[p],textToHighlight:l,findChunks:k,highlightClassName:K.Z.filterHighlight})),P&&i().createElement(F.g3,null,C.explicit?i().createElement(N.N,null):null),i().createElement(F.K9,null,n&&i().createElement(M.o,{nonInteractive:!0,artists:n,filter:p})))),i().createElement(F.UA,{ariaColIndex:2},o.name&&i().createElement(F.BM,{nonInteractive:!0,uri:o.uri,name:o.name},i().createElement(_(),{searchWords:[p],textToHighlight:o.name,findChunks:k,highlightClassName:K.Z.filterHighlight}))),i().createElement(F.mU,{ariaColIndex:3},i().createElement(F.A$,{duration:r}),i().createElement(F.Zv,{menu:i().createElement(z.N,{uri:e,uid:t,contextUri:g}),label:s.ag.get("more.label.track",l,v)})))))}),((e,t)=>e.uri===t.uri&&e.index===t.index)),X=new Set(T.MI),G=i().memo((({uri:e,tracks:t,columns:l,sortState:r,handleSort:n,usePlayContextItem:o,tracklistDomRef:c})=>{const u=(0,a.useRef)(null),m=(0,a.useCallback)(((t,l)=>{const r=(0,A.X)(t.album.images,{desiredSize:40,desiredLabel:"small"});return i().createElement(L,{key:t.uid,index:l,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album,isExplicit:t.isExplicit,isMOGEFRestricted:t.is19PlusOnly,type:t.type,imgUrl:(null==r?void 0:r.url)||"",usePlayContextItem:o})}),[e,o]);return i().createElement(i().Fragment,null,i().createElement(j.ZP,{value:"playlist-tracklist"},i().createElement(w.Pv,{key:e,ariaLabel:s.ag.get("local-files"),hasHeaderRow:!0,columns:l,sortableColumns:X,sortState:r,onSort:n,renderRow:m,resolveUri:e=>e.uri,resolveUid:e=>e.uid,tracks:t,nrTracks:t.length,limit:100,outerRef:u,outerDomRef:c})))})),H="tYmjXB2T6EJhhTtsSijS",W="EetzTXGFCRe2UZJ_1_re";function q(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)}return l}function J(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?q(Object(l),!0).forEach((function(t){n()(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):q(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}const $=[w.QD.INDEX,w.QD.TITLE,w.QD.ALBUM,w.QD.DURATION],Y=()=>{const{filter:e}=(0,a.useContext)(O.fo),{sortState:t,setSortState:l}=(0,a.useContext)(T.Gb),r=(0,a.useContext)(E.t),[n]=(0,p.z)(I.J,!1),w=(0,f.sn)(),[j,A]=(0,a.useState)([]),U=(0,d.Y)(o.Fzl),{filterBoxApiRef:_,filterBoxDomRef:B,tracklistDomRef:N,handleKeyDown:Q}=(0,b.Q)(),z=(0,a.useCallback)((e=>{l((0,h.VK)(e,t))}),[t,l]),F=(0,a.useCallback)((async()=>{const l=await r.getContents({sort:(0,h._j)(t),filter:e});A(l.items)}),[r,t,e]);(0,a.useEffect)((()=>{F()}),[F]);const{isPlaying:M,togglePlay:Z,usePlayContextItem:K}=(0,y.n)({uri:g.bf,pages:[{items:j.map((e=>J(J({},e),{},{provider:null})))}]},{featureIdentifier:"local_files"});return w?0!==w.totalLength&&n?i().createElement("div",{role:"presentation",className:H,onKeyDown:Q},i().createElement(k.gF,{backgroundColor:U},i().createElement(C.W,null,i().createElement(S.$,{size:m.qE.sm,onClick:()=>Z(),isPlaying:M,uri:g.bf}),i().createElement(P.i,{text:s.ag.get("local-files")})),i().createElement(k.sP,null,i().createElement(k.xd,null,s.ag.get("local-files")),i().createElement(k.T0,null,s.ag.get("local-files.description")))),i().createElement(u.o,{backgroundColor:U},i().createElement(u.F,null,i().createElement(S.$,{size:m.qE.xl,onClick:()=>Z(),isPlaying:M,uri:g.bf}),i().createElement("div",{className:W},i().createElement(a.Suspense,{fallback:null},i().createElement(v.K,{placeholder:s.ag.get("playlist.search_in_playlist"),filterBoxApiRef:_,outerRef:B})),i().createElement(R.c,{columns:T.MI})))),i().createElement("div",{className:"contentSpacing"},i().createElement(G,{tracks:j,uri:g.bf,columns:$,handleSort:z,sortState:t,usePlayContextItem:K,tracklistDomRef:N}))):i().createElement(x.u,{linkTo:"/preferences",linkTitle:s.ag.get("local-files.empty-button"),message:s.ag.get("local-files.empty-description"),title:s.ag.get("local-files.empty-header")},i().createElement(c.X,{iconSize:64})):i().createElement(D.h,{hasError:!1,errorMessage:s.ag.get("error.request-artist-failure")})},V=()=>i().createElement(T.kz,{uri:"spotify:internal:local-files"},i().createElement(O.hz,{uri:"spotify:internal:local-files"},i().createElement(Y,null)))},32129:(e,t,l)=>{l.d(t,{c:()=>d});var r=l(67294),n=l.n(r),a=l(20657),i=l(36132),o=l(95289),c=l(5292),s=l(28248),u=l(78462);function m(e){return!!e}const d=({columns:e})=>{const t=[...e];t.splice(2,0,s.QD.ARTIST);const{sortState:l,setSortState:d}=(0,r.useContext)(u.Gb),g=function(e){return null===e.column?c.mE[s.QD.INDEX]:(0,i.cB)(e.column,e.order)?c.mE[s.QD.ARTIST]:c.mE[e.column]}(l),f=(0,r.useCallback)((e=>{d((0,c.WQ)(e,l.column,l.order))}),[d,l.column,l.order]),E=(0,r.useCallback)((()=>null!==l.column),[l.column]),p=t.map((e=>c.mE[e])).filter(m);return n().createElement(o.A,{options:p,onSelect:f,selected:g,isSelectionChanged:E,sortOrder:l.order,heading:a.ag.get("drop_down.sort_by")})}},1169:(e,t,l)=>{l.d(t,{Q:()=>n});var r=l(67294);const n=()=>{const e=(0,r.useRef)(null),t=(0,r.useRef)(null),l=(0,r.useRef)(null);return{filterBoxApiRef:e,filterBoxDomRef:t,tracklistDomRef:l,handleKeyDown:r=>{var n,a,i;"Escape"===r.key&&((null!==(n=t.current)&&void 0!==n&&n.contains(r.target)||null!==(a=l.current)&&void 0!==a&&a.contains(r.target))&&(null===(i=e.current)||void 0===i||i.clearFilter()))}}}}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.js.map